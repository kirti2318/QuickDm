<%- include('partials/header') %>
<div class="dashboard">
  <%- include('partials/side-menu') %>

  <main class="content">
    <div class="template-header">
      <h2>Edit Template</h2>
    </div>

    <div class="card edit-card">
      <form action="/dashboard/templates/update/<%= template._id %>" method="POST" class="template-form">
        <div class="form-group">
          <label for="title">Title:</label>
          <input
            type="text"
            id="title"
            name="title"
            value="<%= template.title %>"
            required
            class="input-field"
          />
        </div>

        <div class="form-group">
          <label for="template-content">Content:</label>
          <textarea
            id="template-content"
            name="content"
            rows="10"
            required
            class="textarea-field"
          ><%= template.content %></textarea>
        </div>

        <div class="form-buttons">
          <button type="submit" class="btn">ðŸ’¾ Save Changes</button>
          <button
            type="button"
            class="btn btn-secondary"
            id="copyBtn"
            data-content="<%- template.content.replace(/"/g, '&quot;').replace(/'/g, '&#39;') %>"
          >
            ðŸ“‹ Copy Content
          </button>
        </div>
      </form>
    </div>
  </main>
</div>

<style>
  .template-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
  }

  .edit-card {
    background: #fff;
    padding: 1.5rem;
    border-radius: 1rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    max-width: 800px;
    margin: auto;
  }

  .form-group {
    margin-bottom: 1rem;
    display: flex;
    flex-direction: column;
  }

  .form-group label {
    margin-bottom: 0.5rem;
    font-weight: 600;
  }

  .input-field,
  .textarea-field {
    padding: 0.75rem;
    font-size: 1rem;
    border: 1px solid #ccc;
    border-radius: 0.5rem;
    width: 100%;
  }

  .form-buttons {
    display: flex;
    gap: 1rem;
    margin-top: 1.2rem;
    flex-wrap: wrap;
  }

  .btn {
    padding: 0.6rem 1.2rem;
    font-size: 0.95rem;
    background-color: #4a90e2;
    color: white;
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
  }

  .btn:hover {
    background-color: #357bd8;
  }

  .btn-secondary {
    background-color: #e0e0e0;
    color: #333;
  }

  .btn-secondary:hover {
    background-color: #ccc;
  }

  @media (max-width: 600px) {
    .template-header h2 {
      font-size: 1.5rem;
    }

    .form-buttons {
      flex-direction: column;
    }

    .btn,
    .btn-secondary {
      width: 100%;
      text-align: center;
    }
  }
</style>

<script>
  document.getElementById('copyBtn').addEventListener('click', function () {
    const content = this.getAttribute('data-content');
    navigator.clipboard.writeText(content)
      .then(() => alert('Template content copied to clipboard!'))
      .catch(err => alert('Failed to copy content: ' + err));
  });
  
  document.querySelector('.template-form').addEventListener('submit', function () {
    alert('âœ… Template successfully updated and added to the list go and check at last!');
  });


</script>

<%- include('partials/footer') %>
